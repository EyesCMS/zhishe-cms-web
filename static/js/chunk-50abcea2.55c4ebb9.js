(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50abcea2"],{1540:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"j",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"n",(function(){return m})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"l",(function(){return p})),n.d(e,"o",(function(){return h})),n.d(e,"k",(function(){return v})),n.d(e,"c",(function(){return k})),n.d(e,"i",(function(){return g}));var i=n("b775");function r(t){return Object(i["a"])({url:"/forum/posts",method:"get",params:t})}function a(t,e,n){return Object(i["a"])({url:"/forum/".concat(t,"/posts"),method:"get",params:e})}function o(t,e,n){return Object(i["a"])({url:"/forum/posts/mine",method:"get",params:e})}function s(t,e){return Object(i["a"])({url:"/forum/posts/".concat(t),method:"get",params:e})}function c(t,e){return Object(i["a"])({url:"/forum/posts/".concat(t,"/remarks"),method:"get",params:e})}function l(t){return Object(i["a"])({url:"/forum/posts/remarks",method:"post",data:t})}function u(t,e){return Object(i["a"])({url:"/forum/posts/".concat(t),method:"put",data:e})}function m(t){return Object(i["a"])({url:"/forum/posts",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/forum/posts",method:"get",params:t})}function f(t){return Object(i["a"])({url:"forum/posts/".concat(t),method:"delete"})}function p(t){return Object(i["a"])({url:"/forum/like",method:"post",params:t})}function h(t){return Object(i["a"])({url:"/forum/unlike",method:"post",params:t})}function v(t){return Object(i["a"])({url:"/forum/like",method:"get",params:t})}function k(t){return Object(i["a"])({url:"/forum/posts/remarks/".concat(t),method:"delete"})}function g(t){return Object(i["a"])({url:"/clubs/activities/recommended",method:"get",params:t})}},"8c9e":function(t,e,n){},"951a":function(t,e,n){t.exports=n.p+"static/img/default.3da3b68e.jpg"},c16f:function(t,e,n){"use strict";var i=n("8c9e"),r=n.n(i);r.a},f557:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("el-card",{staticStyle:{margin:"15px 15px"}},[i("el-row",[null!==t.detailInfo.avatarUrl?i("el-image",{staticStyle:{width:"40px",height:"40px","border-radius":"50%",float:"left"},attrs:{src:t.detailInfo.avatarUrl,lazy:""}}):i("img",{staticStyle:{width:"40px",height:"40px","border-radius":"50%",float:"left"},attrs:{src:n("951a"),lazy:""}}),t._v(" "),i("p",{staticStyle:{float:"left"}},[t._v(t._s(t.detailInfo.posterName))])],1),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("p",{staticStyle:{"font-size":"22px","font-weight":"bold"}},[t._v(t._s(t.detailInfo.title))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.detailInfo.imgUrl,expression:"detailInfo.imgUrl"}]},[i("el-image",{attrs:{src:t.detailInfo.imgUrl}})],1),t._v(" "),i("p",{staticStyle:{"text-indent":"2em","font-size":"20px","line-height":"37px","text-align":"left"}},[t._v(t._s(t.detailInfo.content))]),t._v(" "),i("p",[t._v(t._s(t.detailInfo.createAt))])]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.content,placement:"top"}},[i("el-badge",{staticClass:"item",attrs:{value:t.detailInfo.likeCount,type:"warning"}},[t.unlikeShow?i("el-button",{attrs:{type:"info",icon:"el-icon-star-off",circle:""},on:{click:function(e){return t.like()}}}):i("el-button",{attrs:{type:"danger",icon:"el-icon-star-off",circle:""},on:{click:function(e){return t.unlike()}}})],1)],1)],1),t._v(" "),i("el-row",[i("el-badge",{directives:[{name:"show",rawName:"v-show",value:!t.showComment,expression:"!showComment"}],staticClass:"item",staticStyle:{display:"inline",float:"right",cursor:"pointer"},attrs:{value:t.detailInfo.commentCount}},[i("p",{on:{click:function(e){t.showComment=!0,t.getRemarksListData()}}},[t._v("\n            查看评论\n            "),i("i",{staticClass:"el-icon-s-comment",staticStyle:{display:"inline",float:"right",cursor:"pointer"}})])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:t.showComment,expression:"showComment"}],staticStyle:{display:"inline",float:"right",cursor:"pointer"},on:{click:function(e){t.showComment=!1}}},[t._v("\n          收起评论\n          "),i("i",{staticClass:"el-icon-s-comment",staticStyle:{display:"inline",float:"right",cursor:"pointer"}})])],1)],1),t._v(" "),i("el-card",{directives:[{name:"show",rawName:"v-show",value:t.showComment,expression:"showComment"}],staticStyle:{margin:"15px 15px"},attrs:{id:"comment"}},[t._l(t.remarksList,(function(e,n){return i("div",{key:n},[i("div",{on:{click:function(n){return t.viewUserDetail(e.userId)}}},[i("el-row",[i("el-avatar",{staticStyle:{float:"left"},attrs:{src:e.avatarUrl}}),t._v(" "),i("p",{staticStyle:{float:"left","margin-left":"5px"}},[t._v(t._s(e.nickname))])],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:22}},[i("p",[t._v(t._s(e.content))]),t._v(" "),i("p",[t._v(t._s(e.createAt))])]),t._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.userId===t.userId,expression:"item.userId===userId"}],attrs:{span:1}},[i("div",{staticStyle:{display:"inline",float:"right",margin:"10px"},on:{click:function(n){return t.showDeletRemark(e)}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除评论",placement:"top"}},[i("i",{staticClass:"el-icon-delete icon",staticStyle:{cursor:"pointer"}})])],1)])],1),t._v(" "),i("el-divider")],1)})),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[t.queryInfo.limit<t.remarksTotal?i("el-link",{attrs:{type:"primary"},on:{click:t.viewMoreRemarks}},[t._v("查看更多评论")]):i("p",[t._v("已加载全部评论")])],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"15px"}},[i("el-input",{staticClass:"input-with-select",attrs:{type:"textarea",placeholder:"请发表评论"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?t.createLineFeed():null}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.sendComment(e)}},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{id:"postButton",type:"primary"},on:{click:t.sendComment}},[t._v("发表")])],1)],2)],1),t._v(" "),i("el-dialog",{attrs:{title:"提示",visible:t.deletRemarkVisible,width:"30%"},on:{"update:visible":function(e){t.deletRemarkVisible=e}}},[i("p",[t._v(t._s(t.deletRemark.content))]),t._v(" "),i("span",{staticStyle:{float:"right"}},[t._v("确认删除该评论吗？")]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.deletRemarkVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deletRemarks(t.deletRemark.id)}}},[t._v("确 定")])],1)])],1)},r=[],a=(n("96cf"),n("3b8d")),o=n("1540"),s={name:"ActivityDetail",data:function(){return{content:"",id:this.$route.query.id,clubId:sessionStorage.getItem("clubId"),userId:this.$store.getters.userId,queryInfo:{page:1,limit:5,sort:"updateAt",order:"desc"},detailQuery:{type:1},likeInfo:{likedPostId:this.$route.query.id},getLikeInfo:{postId:this.$route.query.id},unlikeShow:!0,detailInfo:{},remarksList:[],remarksTotal:0,clubAvator:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",comment:"",showComment:!1,memberInfo:{},deletRemark:{content:"",id:""},deletRemarkVisible:!1}},created:function(){this.id=this.$route.query.id,this.getInvitationDetailData(),this.getUserLikeData()},methods:{getInvitationDetailData:function(){var t=this;Object(o["f"])(this.id,this.detailQuery).then((function(e){t.detailInfo=e.data}))},getRemarksListData:function(){var t=this;Object(o["j"])(this.id,this.queryInfo).then((function(e){t.remarksList=e.data.items,t.remarksTotal=e.data.totalCount}))},viewMoreRemarks:function(){this.queryInfo.limit+=5,this.getRemarksListData()},sendComment:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e={postId:this.detailInfo.id,content:this.comment},""!==e.content){t.next=5;break}this.$message.error("评论不能为空"),t.next=11;break;case 5:return t.next=7,Object(o["m"])(e).then((function(t){i.$message.success("发表成功")}));case 7:this.comment="",this.getRemarksListData(),n=document.getElementById("comment"),n.scrollIntoView();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUserLikeData:function(){var t=this;Object(o["k"])(this.getLikeInfo).then((function(e){if(200!==e.status)return t.$message.error("获取点赞信息失败");1===e.data.status?(t.content="取消点赞",t.unlikeShow=!1):(t.content="点赞",t.unlikeShow=!0)}))},like:function(){var t=this;Object(o["l"])(this.likeInfo).then((function(e){return 204===e.status?(t.unlikeShow=!1,t.getInvitationDetailData(),t.content="取消点赞",t.$message.success("点赞成功")):t.$message.error("点赞失败")}))},unlike:function(){var t=this;Object(o["o"])(this.likeInfo).then((function(e){return 204===e.status?(t.unlikeShow=!0,t.getInvitationDetailData(),t.content="点赞",t.$message.success("取消点赞成功")):t.$message.error("取消点赞失败")}))},createLineFeed:function(){this.textContent=this.textContent+"\n"},showDeletRemark:function(t){this.deletRemark=t,this.deletRemarkVisible=!0},deletRemarks:function(t){var e=this;this.deletRemarkVisible=!1,Object(o["c"])(t).then((function(t){e.$message.success("删除成功"),e.getRemarksListData()}))},viewUserDetail:function(t){this.$router.push({path:"/clubmember/detail",query:{userId:t}})}}},c=s,l=(n("c16f"),n("2877")),u=Object(l["a"])(c,i,r,!1,null,"dd18183a",null);e["default"]=u.exports}}]);