(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24227ce3"],{"0983":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[e.user?a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6,xs:24}},[a("user-card",{attrs:{user:e.user}})],1),e._v(" "),a("el-col",{attrs:{span:18,xs:24}},[a("el-card",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"个人信息",name:"account"}},[a("account",{attrs:{user:e.user}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"修改密码",name:"changePassword"}},[a("changePassword")],1)],1)],1)],1)],1)],1):e._e()])},s=[],o=(a("7f7f"),a("db72")),n=a("2f62"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("关于我")])]),e._v(" "),a("div",{staticClass:"user-profile"},[a("div",{staticClass:"box-center"},[a("pan-thumb",{attrs:{image:e.form.avatarUrl,height:"100px",width:"100px",hoverable:!1}},[a("div",[e._v("Hello")]),e._v("\n        "+e._s(e.user.role[0])+"\n      ")])],1),e._v(" "),a("div",{staticClass:"box-center"},[a("div",{staticClass:"user-name text-center"},[e._v(e._s(e.user.name))])])]),e._v(" "),a("div",{staticClass:"user-bio"},[a("div",{staticClass:"user-education user-bio-section"},[a("div",{staticClass:"user-bio-section-header"},[a("svg-icon",{attrs:{"icon-class":"skill"}}),e._v(" "),a("span",[e._v("头像修改")])],1),e._v(" "),a("div",{staticClass:"user-bio-section-body",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("上传头像")]),e._v(" "),a("el-dialog",{attrs:{title:"修改头像",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-card",[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"上传网络照片",name:"uploadWeb"}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"头像地址","label-width":"80px"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{autocomplete:"off"},model:{value:e.form.avatarUrl,callback:function(t){e.$set(e.form,"avatarUrl",t)},expression:"form.avatarUrl"}})],1)],1),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary","dialog-form-visible":"false"},on:{click:function(t){return e.submitProfile()}}},[e._v("确 定")])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"上传本地照片",name:"uploadLocal"}},[a("el-upload",{attrs:{"show-file-list":!1,accept:"image/gif, image/jpeg, image/jpg, image/png, image/svg","before-upload":e.beforeAvatarUpload,action:""}},[e.form.avatarUrl?a("img",{staticClass:"avatar",attrs:{src:e.form.avatarUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"15px"},attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1)],1)],1)],1)])])])},l=[],c=a("3cbc"),f=a("c24f"),m=void 0,u={components:{PanThumb:c["a"]},props:{user:{type:Object,default:function(){return{nickname:m.$store.getters.nickname,email:m.$store.getters.email,address:m.$store.getters.address,role:m.$store.getters.role,major:m.$store.getters.major,phone:m.$store.getters.phone,slogan:m.$store.getters.slogan}}}},data:function(){return{activeTab:"uploadWeb",imagecropperShow:!1,imagecropperKey:0,form:{avatarUrl:""},dialogFormVisible:!1}},created:function(){this.getInfo()},methods:{beforeAvatarUpload:function(e){var t=this,a="image/jpeg"===e.type||"image/jpg"===e.type,r=e.size/1024/1024<2;if(a||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&r){var s=new FormData;s.append("image",e),Object(f["k"])(s).then((function(e){t.form.avatarUrl=e.data.avatarUrl,t.$message.success("修改头像成功"),t.imagecropperShow=!1}))}return!1},submitProfile:function(){var e=this;this.dialogFormVisible=!1,Object(f["i"])(this.form).then((function(t){204===t.status&&e.$message.success("修改成功")})),this.getInfo()},getInfo:function(){var e=this;Object(f["c"])().then((function(t){e.form.avatarUrl=t.data.avatar}))}}},p=u,d=(a("4d2f"),a("2877")),v=Object(d["a"])(p,i,l,!1,null,"361aec22",null),b=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"===typeof t?t.trim():t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"旧密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword","string"===typeof t?t.trim():t)},expression:"form.oldPassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword","string"===typeof t?t.trim():t)},expression:"form.newPassword"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.updatePassword}},[e._v("修改")])],1)],1)],1)},h=[],_={data:function(){return{form:{username:this.$store.getters.name,oldPassword:"",newPassword:""},formRules:{newPassword:[{min:6,max:20,message:"请输入6~20位的密码",trigger:"blur"}]}}},methods:{updatePassword:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(f["j"])(e.form).then((function(t){204===t.status?e.$message.success("修改成功"):e.$message.erroe("修改失败")}))}))}}},y=_,w=Object(d["a"])(y,g,h,!1,null,null,null),x=w.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",[a("el-form-item",{attrs:{label:"昵称"}},[a("el-input",{model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname","string"===typeof t?t.trim():t)},expression:"form.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"专业"}},[a("el-input",{model:{value:e.form.major,callback:function(t){e.$set(e.form,"major","string"===typeof t?t.trim():t)},expression:"form.major"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Email"}},[a("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address","string"===typeof t?t.trim():t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"个性签名"}},[a("el-input",{model:{value:e.form.slogan,callback:function(t){e.$set(e.form,"slogan","string"===typeof t?t.trim():t)},expression:"form.slogan"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitProfile}},[e._v("修改")])],1)],1)],1)},k=[],j={data:function(){return{form:{nickname:"",email:"",address:"",major:"",phone:"",slogan:""}}},created:function(){this.getInfoData()},methods:{submitProfile:function(){var e=this;Object(f["i"])(this.form).then((function(t){204===t.status&&(e.$message.success("修改成功"),e.getInfoData())}))},getInfoData:function(){var e=this;Object(f["c"])().then((function(t){e.form.nickname=t.data.nickname,e.form.email=t.data.email,e.form.address=t.data.address,e.form.major=t.data.major,e.form.phone=t.data.phone,e.form.slogan=t.data.slogan}))}}},I=j,P=Object(d["a"])(I,$,k,!1,null,null,null),O=P.exports,C={name:"Profile",components:{UserCard:b,Account:O,ChangePassword:x},data:function(){return{user:{},activeTab:"account"}},computed:Object(o["a"])({},Object(n["b"])(["nickname","avatar","major","slogan","phone","role"])),created:function(){this.getUser()},methods:{getUser:function(){this.user={name:this.$store.getters.name,nickname:this.$store.getters.nickname,role:this.$store.getters.roles,email:this.$store.getters.email,address:this.$store.getters.address,avatar:this.$store.getters.avatar,major:this.$store.getters.major,phone:this.$store.getters.phone,slogan:this.$store.getters.slogan}}}},E=C,N=Object(d["a"])(E,r,s,!1,null,null,null);t["default"]=N.exports},"11e9":function(e,t,a){var r=a("52a7"),s=a("4630"),o=a("6821"),n=a("6a99"),i=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=o(e),t=n(t,!0),l)try{return c(e,t)}catch(a){}if(i(e,t))return s(!r.f.call(e,t),e[t])}},"133c":function(e,t,a){"use strict";var r=a("d785"),s=a.n(r);s.a},"3cbc":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pan-item",style:{zIndex:e.zIndex,height:e.height,width:e.width}},[a("div",{staticClass:"pan-info"},[a("div",{staticClass:"pan-info-roles-container"},[e._t("default")],2)]),e._v(" "),a("div",{staticClass:"pan-thumb",style:{backgroundImage:"url("+e.image+")"}})])},s=[],o=(a("c5f6"),{name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),n=o,i=(a("133c"),a("2877")),l=Object(i["a"])(n,r,s,!1,null,"799537af",null);t["a"]=l.exports},"4d2f":function(e,t,a){"use strict";var r=a("febe"),s=a.n(r);s.a},"5dbc":function(e,t,a){var r=a("d3f4"),s=a("8b97").set;e.exports=function(e,t,a){var o,n=t.constructor;return n!==a&&"function"==typeof n&&(o=n.prototype)!==a.prototype&&r(o)&&s&&s(e,o),e}},"8b97":function(e,t,a){var r=a("d3f4"),s=a("cb7c"),o=function(e,t){if(s(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(s){t=!0}return function(e,a){return o(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:o}},9093:function(e,t,a){var r=a("ce10"),s=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,s)}},aa77:function(e,t,a){var r=a("5ca1"),s=a("be13"),o=a("79e5"),n=a("fdef"),i="["+n+"]",l="​",c=RegExp("^"+i+i+"*"),f=RegExp(i+i+"*$"),m=function(e,t,a){var s={},i=o((function(){return!!n[e]()||l[e]()!=l})),c=s[e]=i?t(u):n[e];a&&(s[a]=c),r(r.P+r.F*i,"String",s)},u=m.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(f,"")),e};e.exports=m},c5f6:function(e,t,a){"use strict";var r=a("7726"),s=a("69a8"),o=a("2d95"),n=a("5dbc"),i=a("6a99"),l=a("79e5"),c=a("9093").f,f=a("11e9").f,m=a("86cc").f,u=a("aa77").trim,p="Number",d=r[p],v=d,b=d.prototype,g=o(a("2aeb")(b))==p,h="trim"in String.prototype,_=function(e){var t=i(e,!1);if("string"==typeof t&&t.length>2){t=h?t.trim():u(t,3);var a,r,s,o=t.charCodeAt(0);if(43===o||45===o){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+t}for(var n,l=t.slice(2),c=0,f=l.length;c<f;c++)if(n=l.charCodeAt(c),n<48||n>s)return NaN;return parseInt(l,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof d&&(g?l((function(){b.valueOf.call(a)})):o(a)!=p)?n(new v(_(t)),a,d):_(t)};for(var y,w=a("9e1e")?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)s(v,y=w[x])&&!s(d,y)&&m(d,y,f(v,y));d.prototype=b,b.constructor=d,a("2aba")(r,p,d)}},d785:function(e,t,a){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},febe:function(e,t,a){}}]);