(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17a05c36"],{"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2630:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("div",{staticClass:"Form"},[r("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.backToLogin()}}},[e._v("返回")]),e._v(" "),r("h3",{staticClass:"form-title"},[e._v("重置密码")]),e._v(" "),r("el-steps",{attrs:{active:e.name,"finish-status":"success",simple:""}},[r("el-step",{attrs:{title:" 填写用户名"}}),e._v(" "),r("el-step",{attrs:{title:"填写答案"}}),e._v(" "),r("el-step",{attrs:{title:"修改密码"}})],1),e._v(" "),r("el-tabs",{attrs:{disabled:"false"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{name:"1"}},[r("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.form1Rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleClick(2)}},model:{value:e.form1.username,callback:function(t){e.$set(e.form1,"username",t)},expression:"form1.username"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClick(2)}}},[e._v("下一步")])],1)],1)],1),e._v(" "),r("el-tab-pane",{attrs:{name:"2"}},[r("el-form",{ref:"form2",attrs:{model:e.form2,rules:e.form2Rules}},[r("el-form-item",{attrs:{label:"保密问题"}},[r("el-input",{model:{value:e.form2.loginQuestion,callback:function(t){e.$set(e.form2,"loginQuestion",t)},expression:"form2.loginQuestion"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"保密回答",prop:"loginAswer"}},[r("el-input",{attrs:{placeholder:"请输入回答"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleClick(3)}},model:{value:e.form2.loginAswer,callback:function(t){e.$set(e.form2,"loginAswer",t)},expression:"form2.loginAswer"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:function(t){return e.back(1)}}},[e._v("上一步")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClick(3)}}},[e._v("下一步")])],1)],1)],1),e._v(" "),r("el-tab-pane",{attrs:{name:"3"}},[r("el-form",{ref:"form3",attrs:{model:e.form3,rules:e.form3Rules}},[r("el-form-item",{attrs:{label:"输入新密码",prop:"newpassword"}},[r("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.form3.newpassword,callback:function(t){e.$set(e.form3,"newpassword",t)},expression:"form3.newpassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"确认新密码",prop:"checkpassword"}},[r("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.form3.checkpassword,callback:function(t){e.$set(e.form3,"checkpassword",t)},expression:"form3.checkpassword"}})],1),e._v(" "),r("el-form-item",{staticStyle:{"text-align":"center"}},[r("el-button",{on:{click:function(t){return e.back(2)}}},[e._v("上一步")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClick()}}},[e._v("提交")])],1)],1)],1)],1)],1)])},a=[],s=(r("6b54"),r("96cf"),r("3b8d")),o=r("c24f"),i={data:function(){return{form1:{username:""},form2:{loginQuestion:"",loginAswer:""},form3:{newpassword:"",checkpassword:""},activeName:"1",name:0,form1Rules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}]},form2Rules:{loginAswer:[{required:!0,trigger:"blur",message:"请输入回答"}]},form3Rules:{newpassword:[{required:!0,trigger:"blur",message:"请输入密码"}],checkpassword:[{required:!0,trigger:"blur",message:"请输入密码"}]}}},methods:{handleClick:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:2===t?this.$refs.form1.validate((function(e){if(e){var n={username:r.form1.username};Object(o["g"])(n).then((function(e){r.form2.loginQuestion=e.data.loginProblem,r.activeName=t.toString(),r.name=t-1})).catch((function(e){}))}else r.$message.error("提交失败")})):3===t?this.$refs.form2.validate((function(e){if(e){var n={username:r.form1.username,answer:r.form2.loginAswer};Object(o["a"])(n).then((function(e){"undefined"===typeof e?r.$message.error("回答错误！"):204===e.status&&(r.activeName=t.toString(),r.name=t-1)})).catch((function(e){r.$message.error("回答错误！")}))}else r.$message.error("提交失败")})):this.$refs.form3.validate((function(e){if(e){var t={username:r.form1.username,answer:r.form2.loginAswer,password:r.form3.newpassword};r.form3.checkpassword===r.form3.newpassword?Object(o["f"])(t).then((function(e){r.$message.success("修改成功！"),r.$router.push("/login")})).catch((function(e){r.$message.error("修改失败")})):r.$message.error("密码不一致！")}}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),backToLogin:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login?redirect=".concat(this.$route.fullPath));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),back:function(e){this.activeName=e.toString(),this.name=e-1}}},l=i,c=(r("b932"),r("2877")),u=Object(c["a"])(l,n,a,!1,null,"a1c34846",null);t["default"]=u.exports},3846:function(e,t,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"6b54":function(e,t,r){"use strict";r("3846");var n=r("cb7c"),a=r("0bfb"),s=r("9e1e"),o="toString",i=/./[o],l=function(e){r("2aba")(RegExp.prototype,o,e,!0)};r("79e5")((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?l((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?a.call(e):void 0)})):i.name!=o&&l((function(){return i.call(this)}))},b932:function(e,t,r){"use strict";var n=r("e8ad"),a=r.n(n);a.a},e8ad:function(e,t,r){}}]);